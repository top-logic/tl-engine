<h2>Syntax</h2>

<pre>
	<code>$input.parseCSV()</code>
</pre>

<h2>Beschreibung</h2>

<p>Interpretiert die Eingabe als CSV formattierten Text.</p>

<h2>​Parameter</h2>

<table class="tlDocTable">
	<thead>
		<tr>
			<th>Name</th>
			<th>Typ</th>
			<th>Beschreibung</th>
			<th>Pflicht</th>
			<th>Default</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>input</td>
			<td>Binärwert</td>
			<td>Text im CSV-Format</td>
			<td>ja</td>
			<td>-</td>
		</tr>
		<tr>
			<td>raw</td>
			<td>Boolean</td>
			<td>
			<p><span style="color:#2980b9">raw = true</span>: Die Funktion liefert die Rohdaten</p>

			<p>als Liste von Listen mit Header zurück.</p>

			<p><span style="color:#2980b9">sonst:</span> Die Funktion liefert eine Liste von Maps,</p>

			<p>wobei die Spaltennamen (aus dem Header)</p>

			<p>als Key verwendet werden.</p>
			</td>
			<td>Nein</td>
			<td>false/null</td>
		</tr>
		<tr>
			<td>parsers</td>
			<td>Map</td>
			<td>Formatierungsangaben für die einzelne spalten</td>
			<td>Nein</td>
			<td>null</td>
		</tr>
	</tbody>
</table>

<h2>Rückgabewert</h2>

<p><strong>Typ:</strong> Liste</p>

<p>Erzeugt pro Zeile in der Eingabe eine Liste/Map und fasst anschließend diese Listen in einer Liste zusammen.</p>

<h2>Beispiele</h2>

<h3>Beispiel 1:</h3>

<pre>
<code>{
    toParse = binary(
        name: "test.csv",
        data: "date; name; number
        15.07.2024; test; 5
        16.07.2024; test2; 2; etc.
        17.07.2024",
        contentType: "text/csv",
        encoding: "utf-8"
    );
    result = $toParse.parseCSV(true);
    $result[0]
}</code>
</pre>

<p><span style="color:#3498db"><strong>Ausgabe:</strong></span> ["date", "name", "number"]</p>

<p>Der Aufruf von <code class="hljs inlineCode">parseCSV(true)</code> liefert die Liste <code class="hljs inlineCode">[["date", "name", "number"], ["15.07.2024", "test", "5"], ["16.07.2024", "test2", "2", "etc."],["17.07.2024"]].</code></p>

<h3> </h3>

<h3>Beispiel 2:</h3>

<pre>
<code>{
    toParse = binary(
        name: "test.csv",
        data: "date; name; number
        15.07.2024; test; 5
        16.07.2024; test2; 2; etc.
        17.07.2024",
        contentType: "text/csv",
        encoding: "utf-8"
    );
    result = $toParse.parseCSV();
    $result
}</code>
</pre>

<p><span style="color:#3498db"><strong>Ausgabe:</strong></span> [{<span style="color:#c0392b">date=</span> 15.07.2024, <span style="color:#c0392b">number=</span> 5, <span style="color:#c0392b">name=</span> test}, {<span style="color:#c0392b">date=</span> 16.07.2024, <span style="color:#c0392b">number=</span> 2, <span style="color:#c0392b">name=</span> test2}, {<span style="color:#c0392b">date</span>= 17.07.2024, <span style="color:#c0392b">number=</span>, <span style="color:#c0392b">name=</span>}]</p>

<p>Der Aufruf von <code class="hljs inlineCode">parseCSV()</code> liefert eine Liste von Maps. Dabei wird die erste Zeile als Header gewählt und deren Einträge als Schlüssel für die Maps verwendet. Anschließend wird für jede weitere Zeile aus deren Einträgen gemäß den Schlüsseln des Headers der zugehörigen Map erzeugt, wobei überschüssige Einträge der Zeile ignoriert und fehlenden Einträgen der Zeile mit leeren Strings aufgefüllt werden.</p>

<p> </p>

<h3>Beispiel 3:</h3>

<pre>
<code>{
    toParse = binary(
        name: "test.csv",
        data: "date; name; number
        15.07.2024; test; 5
        16.07.2024; test2; 2; etc.
        17.07.2024",
        contentType: "text/csv",
        encoding: "utf-8"
    );
    result = $toParse.parseCSV(parsers: {"date": x-&gt; dateFormat("dd.MM.yy").format(dateFormat("dd.MM.yyy").parse($x)) });
    $result
}</code>
</pre>

<p><span style="color:#3498db"><strong>Ausgabe:</strong></span> [{<span style="color:#c0392b">date=</span> 15.07.24, <span style="color:#c0392b">number= </span>5, <span style="color:#c0392b">name=</span> test}, {<span style="color:#c0392b">date=</span> 16.07.24, <span style="color:#c0392b">number=</span> 2, <span style="color:#c0392b">name</span>= test2}, {<span style="color:#c0392b">date=</span> 17.07.24, <span style="color:#c0392b">number=</span>, <span style="color:#c0392b">name=</span>}]</p>

<p>Hier wird beim Aufruf von <code class="hljs inlineCode">parseCSV()</code> ein Parser für Spalte mit den Namen "date" mit angegeben, welche die Einträge aus dem entsprechenden Zellen aufbereitet.</p>
