<h2>​Syntax</h2>

<p> </p>

<pre>
<code>$collection.flatMap($func)</code></pre>

<h2>Beschreibung</h2>

<p>Wendet die Funktion <code class="hljs inlineCode">func</code> auf jedes Element der Collection <code class="hljs inlineCode">collection</code> an und glättet die Ergebnisse zu einer einzigen Collection zusammen. Wenn die Funktion für ein Element eine Collection zurückgibt, werden alle Elemente dieser Collection zum Ergebnis hinzugefügt. Wenn die Funktion einen einzelnen Wert zurückgibt, wird dieser Wert direkt zum Ergebnis hinzugefügt.</p>

<p>Dies ist äquivalent zu <code class="hljs inlineCode">collection.map($func).flatten()</code>, aber effizienter, da keine Zwischen-Collections erstellt werden.</p>

<h2>Parameter</h2>

<table class="tlDocTable">
	<thead>
		<tr>
			<th>Name</th>
			<th>Typ</th>
			<th>Beschreibung</th>
			<th>Pflicht</th>
			<th>Default</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>collection</td>
			<td>Collection</td>
			<td>Die Eingabecollection, deren Elemente transformiert werden sollen.</td>
			<td>ja</td>
			<td> </td>
		</tr>
		<tr>
			<td>func</td>
			<td>Funktion</td>
			<td>Die Funktion, die auf jedes Element angewendet wird. Die Funktion kann entweder eine Collection oder einen einzelnen Wert zurückgeben.</td>
			<td>ja</td>
			<td> </td>
		</tr>
	</tbody>
</table>

<h2>Rückgabewert</h2>

<p><strong>Typ:</strong> Collection</p>

<p>Eine flache Collection mit den transformierten Elementen.</p>

<h2>Beispiele</h2>

<h3>Mehrere Werte pro Element erzeugen</h3>

<pre>
<code>list(1, 2, 3)
    .flatMap(x -&gt; list($x, $x * 10)) </code></pre>

<p><strong>Ausgabe:</strong> <code>[1, 10, 2, 20, 3, 30]</code></p>

<p>Für jede Zahl werden sowohl die Originalzahl als auch das 10-fache in die Ergebnisliste aufgenommen.</p>

<h3>Listen zusammenführen</h3>

<pre>
<code>list(
  list(1, 2, 3),
  list(4, 5), 
  list(6, 7, 8, 9)
).flatMap(sublist -> $sublist.filter(x -> $x % 2 == 0)) </code></pre>

<p><strong>Output:</strong> <code>[2, 4, 6, 8]</code></p>

<p>Die verschachtelten Listen werden gefiltert, um nur gerade Zahlen zu erhalten, dann werden alle Ergebnisse zu einer flachen Liste zusammengeführt.</p>

<h3>Vergleich mit map().flatten()</h3>

<pre>
<code>// Statt
list(1, 2).map(x -&gt; list($x, $x * 2)).flatten() 
// Besser
list(1, 2).flatMap(x -&gt; list($x, $x * 2)) </code></pre>

<p><strong>Vorteil:</strong> Die <code>flatMap</code>-Variante ist effizienter, da keine temporäre Liste von Listen erstellt wird.</p>

<p>​</p>
