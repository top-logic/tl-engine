<?xml version="1.0" encoding="utf-8" ?>

<config:template-call
	xmlns:config="http://www.top-logic.com/ns/config/6.0"
	template="com.top_logic.model.search/create/genericCreateDialog.template.xml"
>
	<arguments>
		<title>
			<title key="dynamic.6522ee4f-3694-495d-b7ae-16951969119d">
				<en>Create usage</en>
				<de>Verwendung anlegen</de>
			</title>
		</title>
		<open-handler id="ID_60f8aefd_70e3_479f_b096_c1ef1bf04e3f"
			config:interface="com.top_logic.layout.editor.config.CreateDialogOpenHandlerConfig"
			image="css:fa-solid fa-turn-up"
			target="selection(self())"
			targetComponent="com.top_logic.demo/technical/components/flowchart1/products/constructionPlan/createUsage/dialog.layout.xml#Editor"
		>
			<resourceKey key="dynamic.6522ee4f-3694-495d-b7ae-16951969119d">
				<en>Create usage</en>
				<de>Verwendung anlegen</de>
			</resourceKey>
			<executability>
				<rule-by-expression>
					<decision><![CDATA[selection -> 
    $selection != null &&
    $selection.get(`test.flowchart:FlowNode#usedIn`).isEmpty()]]></decision>
				</rule-by-expression>
			</executability>
		</open-handler>
		<typeOptions type="test.flowchart:FlowNode"/>
		<create-handler id="ID_261c31b6_8496_41ef_ba1a_1d99d2544e92">
			<linkOperation><![CDATA[x -> newNode -> part -> {
    $part.container().add(`test.flowchart:Product#buildInstructions`, $newNode);
    $newNode.add(`test.flowchart:FlowNode#inputs`, $part);
}]]></linkOperation>
		</create-handler>
	</arguments>
</config:template-call>