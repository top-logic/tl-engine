<p>Die TopLogic Application Engine besteht aus einer Vielzahl aufeinander aufbauender Konzepte. Verlässt man die reine in-app Konfiguration von Anwendungen und möchte Erweiterungen für die Engine implementieren, muss man einen Überblick über das Zusammenspiel haben. Dieses Kapitel liefert einen Überblick und kann als Einstiegspunkt in den Quellcode und die damit verknüpfte API-Dokumentation verwendet werden.</p>
<h2>Modell</h2>
<p>Im Zentrum einer Anwendung steht das Fachmodell, das die Anwendungsdaten beschreibt. Über Annotationen an die Modell-Elemente werden eine Vielzahl von UI-Funktionen gesteuert. Das Modell kann in der Anwendung selbst eingesehen und erweitert werden, siehe <a class="tlObject" data-custom="true" href="?page=Modelling&amp;uuid=e4a13f9f-df2e-4dbf-979d-d2bcb0f7a81d">Daten-Modellierung</a>.</p>
<p>Die Schnittstelle <code class="hljs inlineCode">TLModel</code> bietet Zugriff auf alle Module (<code class="hljs inlineCode">TLModule</code>) einer Anwendung und deren Typen. Normale Fachobjekte werden über eine Klasse <code class="hljs inlineCode">TLClass</code> beschrieben. Wie aus UML bekannt haben Klassen Attribute, die in einfache Eigenschaften (<code class="hljs inlineCode">TLProperty</code>) und Referenzen (<code class="hljs inlineCode">TLReference</code>) auf andere Objekte unterteilt sind. Alle Attribute können verpflichtend oder optional sein. Bei einem verpflichtenden Attribut muss eine Eingabe erfolgen, damit ein Objekt angelegt oder die Bearbeitung in einem Editor abgeschlossen werden kann. Referenzen können als Komposition ausgezeichnet sein. Dann beschreiben sie eine Teil-Ganzes-Beziehung und kontrollieren zusätzlich die Lebenszeit des referenzierten Objektes.</p>
<p>Die Modell-Klassen existieren in zwei Varianten. Eine transiente Variante (z.B. <code class="hljs inlineCode">TLClassImpl</code>) und eine persistente Variante für die Repräsentation von Modell-Elementen, die als Objekte in der Datenbank abgelegt sind (z.B: <code class="hljs inlineCode">PersistentClass</code>) .</p>
<h2>Modell-XML</h2>
<p>Das Initialmodell der Anwendung wird über XML-Dateien geladen. In der Regel wird jedes Modul in einer separaten Model-XML-Datei gespeichert. Im Entwicklungsprojekt befinden sich die Modell-Dateien im Ordner <code class="hljs inlineCode">src/main/webapp/WEB-INF/model</code>. Nach einem in-app Entwicklungsschritt können neue Module oder änderungen an bestehenden Module wieder in die Entwicklungsumgebung exportiert werden, um in ein neues Deployment der produktiven Anwendung einzufließen.</p>
<p>Das Schema der Model-XML-Dateien ist über <a class="tlObject" data-custom="true" href="?page=TypedConfiguration&amp;uuid=5122a416-bd1c-445b-83a9-8c88e26004dc">typisierte Konfiguration</a> beschrieben. Das Konfigurations-Interface für ein Modul ist beispielsweise <code class="hljs inlineCode">ModuleConfig</code>, das für eine Klasse <code class="hljs inlineCode">ClassConfig</code> und das für eine Referenz <code class="hljs inlineCode">ReferenceConfig</code>. Beim Anwendungsstart werden Änderungen in den Model-XML-Dateien mit dem in der Anwendung geladenen Modell abgeglichen und bei Bedarf in Änderungen an den Modell-Elementen übersetzt.</p>
<h2>Typisierte Konfiguration</h2>
<p>Die typisierte Konfiguration beschreibt ein Schema für XML-Dateien über Java-Interfaces. Hierbei entspricht grob ein Konfigurationsinterface einem XML-Tag und seine Properties (repräsentiert durch die Getter-Methoden des Interfaces) den Attributen und Subtags. Alle Konfigurationsinterfaces sind Ableitungen von <code class="hljs inlineCode">ConfigurationItem</code>. XML-Dateinen können zu Instanzen der Konfigurationsinterfaces über <code class="hljs inlineCode">ConfigurationReader</code> geparst und über <code class="hljs inlineCode">ConfigurationWriter</code> wieder in XML serialisiert werden.</p>
<p>Spezielle Konfigurationsinterfaces sind Ableitungen von <code class="hljs inlineCode">PolymorphicConfiguration</code>. Diese stellen Konfigurationsoptionen für Implementierungsklassen bereit. Die typisierte Konfiguration hat Mechanismen eingebaut, mit denen konfigurierbare Anwendungsklassen instanziiert und mit Konfigurationen versehen werden können.</p>
<p>Fast alle Konfigurationsdateien in TopLogic haben ein Schema, das über typisierte Konfiguration beschrieben ist. Das Plug-In-Konpept von TopLogic, mit dem Implementierungen ausgetauscht und hinzugefügt werden können, basiert ebenfalls auf der typisierten Konfiguration. Das Kapitel <a class="tlObject" data-custom="true" href="?page=TypedConfiguration&amp;uuid=5122a416-bd1c-445b-83a9-8c88e26004dc">Typisierte Konfiguration</a> beschreibt die Mechanismen der typisierten Konfiguration im Detail.</p>
<h2>Anwendungslayout</h2>
<p>Die Sichten einer Anwendung sind aus Bausteinen zusammengesetzt. Diese Bausteine heißen Komponenten. Technisch ist eine Komponente durch eine Implementierung von <code class="hljs inlineCode">LayoutComponent</code> repräsentiert. Die Aufgabe einer Komponente ist es, ein über das Anwendungsmodell beschriebenes Fachobjekt in ein technisches GUI-Modell zu übersetzen. Komponenten können miteinander über Komponentenkanäle interagieren. Die beiden wichtigsten Komponentenkanäle sind <code class="hljs inlineCode">model</code> und <code class="hljs inlineCode">selection</code>. Typischerweise zeigt eine abhängige Komponente (z.B. ein Formular) die Selektion ihrer übergeordneten Komponente (z.B. einer Tabelle) als Modell an. Dies wird realisiert, indem der Komponentenkanal <code class="hljs inlineCode">model</code> der abhängigen Komponente mit dem Kanal <code class="hljs inlineCode">selection</code> der übergeordneten Komponente verknüpft wird.</p>
<p>Es gibt eine Vielzahl von Komponenten für die unterschiedlichen top-level Bausteine einer Anwendung, z.B. Baum (<code class="hljs inlineCode">TreeComponent</code>), Tabelle (<code class="hljs inlineCode">TableComponent</code>), Formular (<code class="hljs inlineCode">FormComponent</code>), Grid (<code class="hljs inlineCode">GridComponent</code>), Tabbar (<code class="hljs inlineCode">TabComponent</code>). Ein Formular übersetzt beispielsweise das anzuzeigende Fachobjekt in ein technisches Modell den <code class="hljs inlineCode">FormContext</code>, welcher für jedes Attribut des zu editierenden Objektes ein Eingabefeld (<code class="hljs inlineCode">FormField</code>) enthält. Die letztendliche Darstellung der UI-Modelle wird über in der UI-Schicht über <code class="hljs inlineCode">Control</code>s realisiert.</p>
<h2>Layout-XML</h2>
<p>Formularmodelle FormContext - FormField - FormMember</p>
<p>UI-Schicht (Produzieren von HTML aus Modellen): Controls - SelectControl - SelectionControl - ....</p>
<p>Persistenzschicht (OR-Mapping Object -&gt; DB, Versionierung): KnowledegeBase - KnowledgeObject - KnowledgeItem</p>
<p>Technische Kommunikation mit dem Browser: LayoutServlet - AjaxServlet</p>
<p>Services - ManagedClass</p>
<p>TLScript</p>