<h2>Syntax</h2>

<pre>
	<code>kafkaSend($producer, $message, $key, $headers, $topic, $timeout)</code>
</pre>

<h2>Beschreibung</h2>

<p>Sendet eine Nachricht an einen Apache Kafka Server. Die Nachricht wird dem Produzenten übergeben, der sie entsprechend seiner Konfiguration verschickt.</p>

<p>Der Produzent muss im "Kafka Produzenten-Service" konfiguriert sein und er muss vom Typ "Kafka String Produzent" sein. Der Service Editor befindet sich in der Sicht "Administration &gt; Development &gt; Service Editor".</p>

<h2>Parameter</h2>

<table class="tlDocTable">
	<thead>
		<tr>
			<th>Name</th>
			<th>Typ</th>
			<th>Beschreibung</th>
			<th>Pflicht</th>
			<th>Default</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>producer</td>
			<td>Zeichenkette</td>
			<td>Name des Kafka Produzenten</td>
			<td>ja</td>
			<td>-</td>
		</tr>
		<tr>
			<td>message</td>
			<td>Zeichenkette</td>
			<td>Die Nachricht die geschickt werden soll.</td>
			<td>ja</td>
			<td>-</td>
		</tr>
		<tr>
			<td>key</td>
			<td>Zeichenkette</td>
			<td>Der Key für die Nachricht. Siehe die Dokumentation von Apache Kafka für Details.</td>
			<td>nein</td>
			<td>-</td>
		</tr>
		<tr>
			<td>headers</td>
			<td>Liste von Listen</td>
			<td>
			<p>Eine Liste von Headern. Jeder Header ist eine Liste von zwei Zeichenketten. Die erste ist der Header Key, die zweite Zeichenkette ist der Header Wert. Letzterer ist optional. Mehrere Header können den selben Key verwenden. Daher handelt es sich nicht um eine eindeutige Zuordnung von Keys zu Werten.</p>
			</td>
			<td>nein</td>
			<td>-</td>
		</tr>
		<tr>
			<td>topic</td>
			<td>Zeichenkette</td>
			<td>Das Topic auf dem Kafka Server, in das die Nachricht gesendet werden soll.</td>
			<td>nein</td>
			<td>Das Topic des Produzenten</td>
		</tr>
		<tr>
			<td>timeout</td>
			<td>Ganzzahl</td>
			<td>Zeit in Millisekunden, bevor das Senden als gescheitert angesehen wird.</td>
			<td>nein</td>
			<td>10 Sekunden</td>
		</tr>
	</tbody>
</table>

<h2>Rückgabewert</h2>

<p>null - Die Kommunikation mittels Apache Kafka ist asynchron. Daher gibt es keine direkte Antwort.</p>

<h2>Beispiele</h2>

<h3>Einfacher Aufruf</h3>

<pre>
	<code>kafkaSend("your-producer", "Hello World");</code>
</pre>

<h3>Komplexer Aufruf</h3>

<pre><code>kafkaSend(
	"your-producer",
	"Hello World! How are you?",
	"your-key-for-your-first-message",
	[
		["header-key-1", "header-value-1"],
		["header-key-2-without-value"],
		["header-key-3", "header-value-3"]
	],
	"your-topic"
)</code></pre>

<h2>Empfang von Nachrichten</h2>

<p>Zum Empfangen von Nachrichten von einem Apache Kafka Server muss im "Kafka Empfänger Service" ein "Empfänger" mit einem "Nachrichtenprozessor" konfiguriert werden. Für die In-App-Konfiguration gibt es den "Nachrichtenprozessor durch Ausdruck". Diesem wird ein TL-Script konfiguriert, dass aufgerufen wird sobald eine Nachricht empfangen wird. Weitere Dokumentation dazu gibt es direkt am "Nachrichtenprozessor durch Ausdruck".</p>
