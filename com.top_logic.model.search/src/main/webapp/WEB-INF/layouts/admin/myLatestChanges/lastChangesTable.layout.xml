<?xml version="1.0" encoding="utf-8" ?>

<config:template-call
	xmlns:config="http://www.top-logic.com/ns/config/6.0"
	template="com.top_logic/table.template.xml"
>
	<arguments
		defaultColumns="date,message"
		resetInvisible="true"
		type="tl.changelog:ChangeSet"
	>
		<name key="dynamic.af8b86cb-64a3-49df-b5ff-cef684f4bd3a">
			<en>Last changes</en>
			<de>Letzte Änderungen</de>
		</name>
		<modelBuilder class="com.top_logic.element.changelog.ChangeLogListModelBuilder"/>
		<configurationProviders>
			<column-customizations>
				<column name="date">
					<column-width value="160px"/>
				</column>
				<column name="message">
					<column-width value="500px"/>
				</column>
			</column-customizations>
			<sort-columns order="date:descending"/>
			<configurationProvider class="com.top_logic.layout.table.model.AllVisibleColumnsProvider"
				columns="changes,name"
				excluded="true"
			/>
			<configurationProvider class="com.top_logic.element.changelog.ChangeLogRowClassProvider"/>
		</configurationProviders>
		<buttons>
			<button id="exportExcel"
				class="com.top_logic.layout.table.export.ExcelExportHandler"
			/>
			<button id="ID_f98b773f_cce7_43af_ae6a_f8bd08caf5cc"
				class="com.top_logic.element.changelog.RevertCommandHandler"
				group="Write"
				image="css:bi bi-backspace-fill"
				target="selection(self())"
			>
				<resourceKey key="dynamic.e18367fc-d473-4b8a-b02b-a5a5b7e8405e">
					<en>Undo change</en>
					<de>Änderung zurücknehmen</de>
				</resourceKey>
				<executability>
					<rule-by-expression decision="x -> $x != null"/>
					<rule-by-expression decision="x -> $x.get(`tl.changelog:ChangeSet#revertedBy`) == null"/>
				</executability>
				<confirmation class="com.top_logic.tool.boundsec.confirm.CustomConfirmation">
					<confirmMessage key="dynamic.80918be2-05d0-49c6-8706-007118f4ab98">
						<en>Are you sure you want to undo the change "{0}"?</en>
						<de>Sind sie sicher, dass Sie die Änderung "{0}" zurücknehmen wollen?</de>
					</confirmMessage>
				</confirmation>
			</button>
			<button id="ID_b221c75b_4e42_4965_a3c6_139346f8b76a"
				class="com.top_logic.element.changelog.RevertCommandHandler"
				group="Write"
				image="css:bi bi-backspace-reverse-fill"
				target="selection(self())"
			>
				<resourceKey key="dynamic.6330e317-1ca1-44b2-a2c4-94b8600fc5a7">
					<en>Redo change</en>
					<de>Änderung wiederherstellen</de>
				</resourceKey>
				<executability>
					<rule-by-expression decision="x -> $x != null"/>
					<rule-by-expression decision="x -> $x.get(`tl.changelog:ChangeSet#revertedBy`) != null"/>
				</executability>
				<confirmation class="com.top_logic.tool.boundsec.confirm.CustomConfirmation">
					<confirmMessage key="dynamic.a264d894-c206-4886-a8df-3d421b869423">
						<en>Are you sure you want to redo the change "{0}"?</en>
						<de>Sind sie sicher, dass Sie die Änderung "{0}" wiederherstellen wollen?</de>
					</confirmMessage>
				</confirmation>
			</button>
		</buttons>
	</arguments>
</config:template-call>