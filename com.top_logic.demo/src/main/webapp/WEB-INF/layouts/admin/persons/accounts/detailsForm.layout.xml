<?xml version="1.0" encoding="utf-8" ?>

<config:template-call
	xmlns:config="http://www.top-logic.com/ns/config/6.0"
	final="true"
	template="com.top_logic.element/form.template.xml"
>
	<arguments name="class.com.top_logic.layout.editor.I18NConstants.DYNAMIC_COMPONENT.com.top_logic.model.search.tableWithForm.template.i18n.detail"
		model="selection(admin/persons/accounts/accountsTable.layout.xml#Table)"
		type="Contacts:PersonContact"
	>
		<buttons>
			<button id="resetPersonalConfiguration"
				class="com.top_logic.knowledge.gui.layout.person.ResetPersonalConfiguration"
				clique="additional"
				image="theme:ICON_RESET_PERSONAL_CONFIGURATION"
			>
				<resourceKey key="dynamic.49aa2499-5cb1-4f78-929e-4ac543b322aa">
					<en>Reset personal configuration</en>
					<de>Persönliche Konfiguration zurücksetzen</de>
				</resourceKey>
				<target class="com.top_logic.model.search.providers.TransformLinkingByExpression"
					function="contact -> $contact.get(`Contacts:PersonContact#account`)"
					input="model(self())"
				/>
				<executability>
					<rule-by-expression decision="account -> $account != null"/>
				</executability>
				<confirmMessage key="dynamic.8baeb646-37f2-428c-b8e7-4fd4bfcc766d">
					<en>Are you sure they want to delete {0}'s personal settings?</en>
					<de>Sind Sie sicher, dass Sie die persönlichen Einstellungen von {0} löschen wollen?</de>
				</confirmMessage>
			</button>
			<button id="ID_d9a27df8_9c83_4318_9d56_53c2185a9543"
				class="com.top_logic.layout.form.component.DispatchingDeleteHandler"
				target="model(self())"
			/>
			<button id="ID_2fa7a149_7d10_46c9_90e1_b5e4db8b1378"
				class="com.top_logic.layout.component.GenericDeleteCommandHandler"
			>
				<resourceKey key="dynamic.debe8eb3-9a0a-4f33-9fcc-e8489d704213">
					<en>Delete Account</en>
					<de>Zugang Löschen</de>
				</resourceKey>
				<target class="com.top_logic.model.search.providers.TransformLinkingByExpression"
					function="model -> $model.get(`Contacts:PersonContact#account`)"
					input="model(self())"
				/>
				<executability>
					<rule-by-expression decision="account -> $account != null"/>
				</executability>
				<confirmMessage key="dynamic.68a3e9b3-08ee-4821-8dc7-457c78ef32f5">
					<en>Do you really want to delete the account "{0}"? "{0}" will then no longer be able to log in.</en>
					<de>Möchten Sie den Zugang "{0}" wirklich löschen? "{0}" kann sich dann nicht mehr einloggen.</de>
				</confirmMessage>
			</button>
		</buttons>
		<dialogs>
			<layout-reference resource="admin/persons/accounts/changePassword/dialog.layout.xml"/>
			<layout-reference resource="admin/persons/accounts/newAccount2/dialog.layout.xml"/>
		</dialogs>
		<forms>
			<form type="Contacts:PersonContact">
				<formDefinition>
					<group>
						<field
							attribute="firstname"
							fullQualifiedName="Contacts:Contact.Person#firstname"
							type="tl.core:String"
						/>
						<field
							attribute="name"
							fullQualifiedName="Contacts:Contact.all#name"
							type="tl.core:String"
						/>
						<field
							attribute="title"
							fullQualifiedName="Contacts:Contact.Person#title"
							type="tl.core:String"
						/>
						<label key="dynamic.1f5a7ca7-6bc0-405d-b2f8-6ebf4e87dbe8">
							<en>User data</en>
							<de>Nutzerdaten</de>
						</label>
					</group>
					<foreign-objects
						items="x -> $x.get(`Contacts:PersonContact#account`)"
						label="`tl.accounts:Person`.toString()"
						type="tl.accounts:Person"
					>
						<layout>
							<field
								attribute="name"
								fullQualifiedName="tl.accounts:Person#name"
								type="tl.core:String"
								visibility="read-only"
							/>
							<field
								attribute="admin"
								fullQualifiedName="tl.accounts:Person#admin"
								type="tl.core:Boolean"
							/>
							<field
								attribute="restrictedUser"
								fullQualifiedName="tl.accounts:Person#restrictedUser"
								type="tl.core:Boolean"
							/>
							<field
								attribute="authDeviceID"
								fullQualifiedName="tl.accounts:Person#authDeviceID"
								type="tl.core:String"
								visibility="editable"
							/>
							<field
								attribute="timezone"
								fullQualifiedName="tl.accounts:Person#timeZone"
								type="tl.util:TimeZone"
								visibility="editable"
							/>
							<field
								attribute="country"
								fullQualifiedName="tl.accounts:Person#country"
								type="tl.util:Country"
								visibility="editable"
							/>
							<field
								attribute="language"
								fullQualifiedName="tl.accounts:Person#language"
								type="tl.util:Language"
								visibility="editable"
							/>
							<field
								attribute="groups"
								fullQualifiedName="tl.accounts:Person#groups"
								type="tl.accounts:Group"
							/>
							<group>
								<code>
									<impl class="com.top_logic.model.form.implementation.additional.StartPageAutomatism"/>
								</code>
								<code>
									<impl class="com.top_logic.model.form.implementation.additional.CurrentStartPage"/>
								</code>
								<code>
									<impl class="com.top_logic.model.form.implementation.additional.ThemeSelector"/>
								</code>
								<code>
									<impl class="com.top_logic.model.form.implementation.additional.AutoTranslation"/>
								</code>
								<label key="dynamic.f6711e1e-a18a-405e-8f18-b1b737d7ba8d">
									<en>Personal settings</en>
									<de>Persönliche Einstellungen</de>
								</label>
							</group>
						</layout>
					</foreign-objects>
					<group>
						<field
							attribute="email"
							fullQualifiedName="Contacts:Contact.all#email"
							type="tl.core:String"
						/>
						<field
							attribute="phone"
							fullQualifiedName="Contacts:Contact.all#phone"
							type="tl.core:String"
						/>
						<field
							attribute="phone_mobile"
							fullQualifiedName="Contacts:Contact.Person#phone_mobile"
							type="tl.core:String"
						/>
						<field
							attribute="phone_private"
							fullQualifiedName="Contacts:Contact.Person#phone_private"
							type="tl.core:String"
						/>
						<field
							attribute="fax"
							fullQualifiedName="Contacts:Contact.Person#fax"
							type="tl.core:String"
						/>
						<label key="dynamic.10c2421b-b394-4ddc-bad2-d07e2c18b5a3">
							<en>Contact details</en>
							<de>Kontaktdaten</de>
						</label>
					</group>
					<group>
						<field
							attribute="position"
							fullQualifiedName="Contacts:Contact.Person#position"
							type="tl.core:String"
						/>
						<field
							attribute="boss"
							fullQualifiedName="Contacts:Contact.Person#boss"
							type="Contacts:Contact.Person"
						/>
						<field
							attribute="company"
							fullQualifiedName="Contacts:Contact.Person#company"
							type="Contacts:Contact.Company"
						/>
						<label key="dynamic.ac4eddd9-e1ec-4e8e-87e8-0e0ef7186334">
							<en>Organization</en>
							<de>Organisation</de>
						</label>
					</group>
					<group>
						<field
							attribute="remarks"
							fullQualifiedName="Contacts:Contact.all#remarks"
							type="tl.core:String"
						>
							<annotations>
								<label-position value="hide-label"/>
							</annotations>
						</field>
						<label key="dynamic.ce2445e8-bec3-40e9-b69f-788a7c1cc566">
							<de>Bemerkungen</de>
						</label>
					</group>
					<other-attributes/>
				</formDefinition>
			</form>
		</forms>
	</arguments>
</config:template-call>